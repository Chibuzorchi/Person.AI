#!/usr/bin/env python3
"""
Simple Threshold Demo - Shows 0.8 vs 0.95 threshold effect
"""

from ai_quality_validation import AIQualityValidator

def test_threshold_effect():
    """Test how different thresholds affect validation"""
    print("ğŸ¯ Threshold Effect Demo")
    print("=" * 40)
    
    # Create content that's similar but not identical to baseline
    test_content = """Daily Brief - 2024-01-15

Email Summary:
â€¢ Quarterly Sales Report - john@company.com  
â€¢ Client Meeting Request - sarah@client.com
â€¢ Invoice Payment Overdue - billing@vendor.com

Key Insights:
â€¢ 3 urgent items require immediate attention
â€¢ 2 client meetings scheduled for this week  
â€¢ 1 invoice payment overdue
â€¢ New project proposal received

Action Items:
â€¢ Review quarterly sales report
â€¢ Schedule follow-up meeting with client
â€¢ Process invoice payment
â€¢ Prepare project proposal

Generated by Person.ai"""

    print("ğŸ“ Test content:")
    print(f"   Length: {len(test_content)} chars")
    print(f"   Preview: {test_content[:80]}...")
    
    # Test with different thresholds
    thresholds = [0.8, 0.95]
    
    for threshold in thresholds:
        print(f"\nğŸ§ª Testing with threshold: {threshold}")
        
        # Create custom validator with specific threshold
        class CustomValidator(AIQualityValidator):
            def _validate_semantic_similarity(self, content: str, content_type: str):
                baseline_key = f"{content_type}_baseline"
                if baseline_key not in self.baselines:
                    return {"score": 0.0, "passed": False, "details": "No baseline available"}
                
                baseline = self.baselines[baseline_key]
                similarity = self._calculate_similarity(content, baseline["content"])
                
                passed = similarity >= threshold
                
                return {
                    "score": similarity,
                    "passed": passed,
                    "details": f"Similarity: {similarity:.3f} (threshold: {threshold})",
                    "similarity": similarity,
                    "baseline_created": baseline["created_at"]
                }
        
        validator = CustomValidator()
        result = validator.validate_content_quality(test_content, "text")
        
        score = result['validations']['semantic_similarity']['score']
        passed = result['validations']['semantic_similarity']['passed']
        
        print(f"   Score: {score:.3f}")
        print(f"   Passed: {'âœ… YES' if passed else 'âŒ NO'}")
        print(f"   Details: {result['validations']['semantic_similarity']['details']}")

if __name__ == "__main__":
    test_threshold_effect()
