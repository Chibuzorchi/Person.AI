#!/usr/bin/env python3
"""
Varied Content Demo - Shows threshold effect with different content variations
"""

from ai_quality_validation import AIQualityValidator

def test_varied_content():
    """Test with content that varies in similarity"""
    print("ğŸ¯ Varied Content Threshold Demo")
    print("=" * 45)
    
    # Different content variations with varying similarity
    test_cases = [
        {
            "name": "Identical Content",
            "content": """Daily Brief - 2024-01-15

Email Summary:
â€¢ Quarterly Sales Report - john@company.com
â€¢ Client Meeting Request - sarah@client.com
â€¢ Invoice Payment Overdue - billing@vendor.com

Key Insights:
â€¢ 3 urgent items require immediate attention
â€¢ 2 client meetings scheduled for this week
â€¢ 1 invoice payment overdue
â€¢ New project proposal received

Action Items:
â€¢ Review quarterly sales report
â€¢ Schedule follow-up meeting with client
â€¢ Process invoice payment
â€¢ Prepare project proposal

Generated by Person.ai"""
        },
        {
            "name": "Similar Content (Minor Changes)",
            "content": """Daily Brief - 2024-01-15

Email Summary:
â€¢ Quarterly Sales Report - john@company.com
â€¢ Client Meeting Request - sarah@client.com
â€¢ Invoice Payment Overdue - billing@vendor.com

Key Insights:
â€¢ 3 urgent items require immediate attention
â€¢ 2 client meetings scheduled for this week
â€¢ 1 invoice payment overdue
â€¢ New project proposal received

Action Items:
â€¢ Review quarterly sales report
â€¢ Schedule follow-up meeting with client
â€¢ Process invoice payment
â€¢ Prepare project proposal

Generated by Person.ai"""
        },
        {
            "name": "Moderately Different Content",
            "content": """Daily Brief - 2024-01-15

Email Summary:
â€¢ Weekly Sales Report - john@company.com
â€¢ Client Meeting Request - sarah@client.com
â€¢ Invoice Payment Overdue - billing@vendor.com

Key Insights:
â€¢ 3 urgent items require immediate attention
â€¢ 2 client meetings scheduled for this week
â€¢ 1 invoice payment overdue
â€¢ New project proposal received

Action Items:
â€¢ Review weekly sales report
â€¢ Schedule follow-up meeting with client
â€¢ Process invoice payment
â€¢ Prepare project proposal

Generated by Person.ai"""
        },
        {
            "name": "Very Different Content",
            "content": """Morning Update - 2024-01-15

New Messages:
â€¢ Project Status Update - manager@company.com
â€¢ Budget Review Request - finance@company.com
â€¢ Team Meeting Reminder - admin@company.com

Summary:
â€¢ 3 new messages received
â€¢ 1 budget review needed
â€¢ 1 team meeting today

Tasks:
â€¢ Review project status
â€¢ Prepare budget review
â€¢ Attend team meeting

Created by Person.ai"""
        }
    ]
    
    thresholds = [0.8, 0.95]
    
    for test_case in test_cases:
        print(f"\nğŸ“ {test_case['name']}:")
        print(f"   Length: {len(test_case['content'])} chars")
        print(f"   Preview: {test_case['content'][:60]}...")
        
        for threshold in thresholds:
            print(f"\n   ğŸ§ª Threshold {threshold}:")
            
            # Create custom validator with specific threshold
            class CustomValidator(AIQualityValidator):
                def _validate_semantic_similarity(self, content: str, content_type: str):
                    baseline_key = f"{content_type}_baseline"
                    if baseline_key not in self.baselines:
                        return {"score": 0.0, "passed": False, "details": "No baseline available"}
                    
                    baseline = self.baselines[baseline_key]
                    similarity = self._calculate_similarity(content, baseline["content"])
                    
                    passed = similarity >= threshold
                    
                    return {
                        "score": similarity,
                        "passed": passed,
                        "details": f"Similarity: {similarity:.3f} (threshold: {threshold})",
                        "similarity": similarity,
                        "baseline_created": baseline["created_at"]
                    }
            
            validator = CustomValidator()
            result = validator.validate_content_quality(test_case['content'], "text")
            
            score = result['validations']['semantic_similarity']['score']
            passed = result['validations']['semantic_similarity']['passed']
            
            print(f"      Score: {score:.3f}")
            print(f"      Passed: {'âœ… YES' if passed else 'âŒ NO'}")
        
        print("   " + "-" * 30)

if __name__ == "__main__":
    test_varied_content()
